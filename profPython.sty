\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{profPython}[2019/01/29]

% utiles pour pythontex
% libs nécessitant d'être installées...
\begin{pycode}[dft]
from profPythonPY import *
\end{pycode}

\begin{pycode}[math]
import math as m
from cmath import polar, rect
from sympy import *
from dvtDecimal import *
#
x, y, n = symbols('x, y, n')
r = m.sqrt
dD = dvtDecimal
simp = simplify
#
def cosd(x):
    return m.cos(m.radians(x))
def sind(x):
    return m.sin(m.radians(x))
\end{pycode}


\newcommand{\python}{\texttt{Python}\xspace}
%
\newlength{\pythonLogoSize}
\setlength{\pythonLogoSize}{\f@size pt}

%% styles minted
%% pour colorer le python
\newmintedfile[compy]{python}{%
  fontfamily=tt,
  linenos,
  mathescape,
  breaklines,
  autogobble,
  framerule=1pt,
  rulecolor=red,
  python3,
  numbersep=3pt%
}%%
\newminted[envpy]{python}{%
  fontfamily=tt,
  linenos,
  mathescape,
  breaklines,
  autogobble,
  framerule=1pt,
  rulecolor=red,
  python3,
  numbersep=3pt%
}%%
%% style tcolorbox
%% pour encadrer le code
\newtcolorbox{boitepython}{%%
  enhanced,
  breakable,
  colback=yellow!15,
  colframe=blue!20,
  colbacktitle=yellow!30,
  title={\sffamily\texttt{\color{blue!80} Code Python}%%
    \hfill%
    \includegraphics[height=\pythonLogoSize]{python.png}%%
  },
  %% title style={left color=yellow!30, right color=blue!20},
  boxrule=5pt,
  titlerule=.5pt,
  bottomtitle=-2pt,
  toptitle=-2pt,
  arc=10pt,
  watermark graphics=python.png,
  watermark zoom=1.00,
  watermark opacity=.1,
  %% drop fuzzy shadow=blue!50!black
}

%% À UTILISER AVEC UN FICHIER
\newcommand{\fichierpython}[1]{%
  \begin{english}%%
    \begin{boitepython}
      \compy{#1}
    \end{boitepython}
  \end{english}%%
}

%% À UTILISER DIRECTEMENT
\newenvironment{codepython}{
  \VerbatimEnvironment
  \begin{english}%%
    \begin{boitepython}
      \begin{envpy}%
      }{\end{envpy}
    \end{boitepython}
  \end{english}
}

\endinput
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
